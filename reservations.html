<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Réservation · RentCarServices</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style-ui.css">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body style="background:#f1f5f9;">

<nav class="navbar">
    <div class="logo-container">
        <img src="" alt="Logo" class="nav-logo" id="header-logo">
        <span id="header-site-name">RentCarServices</span>
    </div>
    <ul class="nav-links">
        <li><a href="index.html">Accueil</a></li>
        <li><a href="voitures.html">Nos voitures</a></li>
    </ul>
</nav>

<main class="container" style="max-width: 900px; margin: 40px auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.05);">
    <h2 id="titre-page">Finaliser votre réservation</h2>
    <hr>

    <div id="step-1-configuration">
        <div id="calendrier-dispo" style="margin-bottom:20px;"></div>
        
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <input type="hidden" id="id-voiture-input">
            <input type="hidden" id="nom-voiture-hidden">
            <input type="hidden" id="prix-base-input">
            
            <div class="form-group">
                <label>Date de début</label>
                <input type="text" id="date-debut" readonly placeholder="Sélectionnez sur le calendrier">
            </div>
            <div class="form-group">
                <label>Date de fin</label>
                <input type="text" id="date-fin" readonly placeholder="Sélectionnez sur le calendrier">
            </div>
            
            <div class="form-group">
                <label>Votre Nom</label>
                <input type="text" id="loueur-nom">
            </div>
            <div class="form-group">
                <label>Téléphone / WhatsApp</label>
                <input type="tel" id="loueur-tel">
            </div>
        </div>

        <div id="resume-prix" style="margin-top:20px; padding:15px; background:#f8fafc; border-radius:8px;">
            <strong>Total : <span id="prix-total">0</span> Ar</strong>
        </div>

        <button onclick="lancerReservationWhatsApp()" class="btn-reserver" style="width:100%; padding:15px; margin-top:20px; cursor:pointer; background:#22c55e; color:white; border:none; border-radius:8px; font-weight:bold;">
            <i class="fab fa-whatsapp"></i> RÉSERVER VIA WHATSAPP
        </button>
    </div>

    <div id="step-2-paiement" style="display:none;"></div>
    <div id="step-3-download" style="display:none;"></div>
</main>

<script src="script-reservations-1.js"></script>

<script>
    // Initialisation globale si script-reservations-1.js ne le fait pas
    async function initResa() {
        if (typeof supabase !== 'undefined') {
            const res = await fetch('supabase-config.json');
            const config = await res.json();
            window.supabaseClient = supabase.createClient(config.supabaseUrl, config.supabaseKey);
            // Si la fonction chargerDetailsVoiture existe dans ton script-reservations-1.js
            if (typeof chargerDetailsVoiture === 'function') chargerDetailsVoiture();
        }
    }
    document.addEventListener('DOMContentLoaded', initResa);
</script>
</body>
</html>
